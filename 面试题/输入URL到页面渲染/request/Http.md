# 超文本传输协议 HTTP/0.9
1. 客户端发送GET请求，请求一个xxx/index.html
2. 服务器接收到请求后，读取对应的html文件，以ASCII的字符流返回给客户端

- 特点：
1. 只有请求行，没有请求头和请求体
2. 没有响应头
3. 传输的内容是以ASCII字符流来传输的



# HTTP/1.0
相比于0.9，1.0可以支持多种类型文件的传输

通过引入请求头和响应头来让客户端和服务端能更加深入地交流，key-value形式

- 为什么有了请求头和响应头就能支持多种文件的数据传输
请求头：accept: text/html
       accept-encoding：gzip
       accept-language：zh-CN...

响应头：Content-encoding：br
       Content-type：text/html; charset=UTF-8



# HTTP/1.1
持久连接，一个TCP连接建立，可以传输多个HTTP请求，减少了大量TCP连接和断开连接带来的开销

Connection: keep-alive || close

浏览器默认支持6个TCP持久连接————TCP连接一直不关闭也是资源浪费，所以只会维护一段时间，之后释放。用户再进行请求时，会新建立连接。当一个TCP连接还没传输完时，用户又发起了请求（例如点击页面按钮），此时就会TCP并行连接，同时传输多个请求。

- 1.1带来的问题：
  队头阻塞：在TCP连接中当队伍头部的HTTP请求之后没有HTTP相应时，下面所有的HTTP请求就会排队。

- 虚拟机技术的成熟
  请求头：增加了Host字段

- 当传输的内容是动态内容
  (1.0时，服务器在响应头中会告诉客户端，本次传输的文件长度)content-Length: 1024

  Chunk transfer 机制：将数据分割成若干个任意大小的数据块，每个数据块标记好长度，最后发送一个长度为0的数据块来标志发送完毕



# HTTP/2.0
如果只开一个TCP连接，100个资源要下载的时间就是100*n*RTT（RTT：带宽，也就是速率。上传速度叫上行带宽，下载速度叫下行带宽。100兆的带宽也就是100Mbps能达到的下载速度是12.5MB/s，也就是八分之一），但6个TCP连接并行时，花费的时间就是（100*n*RTT）/ 6

- 1.1的问题：带宽用不满
  1. TCP的慢启动：拥塞控制（TCP会感知网络环境的好坏）导致一定有慢启动，慢启动导致页面的关键资源加载时间推后，页面的首次渲染时间变长
  2. 多条TCP连接之间相互竞争带宽，会导致每条TCP连接中能被分配的带宽大大降低，关键资源的下载速度就会被影响
  3. 队头阻塞：前一个请求延迟，后一个请求便无法发送导致带宽浪费

- 2.0多路复用
  1. 一个域名只使用一个TCP长连接（把六个TCP连接合并为一个TCP连接）
  2. 将每一个请求分成一帧一帧的数据进行传输并打上编号（每个请求和响应之间做好对应的标记），同时发送给服务端，且可以在重要资源请求中编辑为加急，服务端接收到带有各种编号的数据帧后，可以区分那个数据帧加急，优先整理和响应该请求的数据帧（通过引入了二进制分帧层实现多路复用）



# HTTP/HTTPS
请求行 例：GET /images/logo.png HTTP/1.1

副作用：影响服务器上的资源
幂等：例如注册十次和二十次不是幂等，但如果更改文章10次和20次是幂等

- GET和POST的区别
  1. 应用场景的区别：GET用于无副作用幂等的场景；POST用于有副作用不幂等的场景
  2. GET请求能缓存；POST不能，就不会被浏览器缓存
  3. POST相对安全一点，POST的参数是在请求体中，GET的参数是拼接在url中
  4. URL的长度是有限的，所以GET请求会受影响，而POST就不会
  5. POST支持更多的编码类型且不对数据类型做限制

- HTTP状态码
  200
  204
  205
  206

  301
  302
  303
  304

  400
  401
  403
  404

  500
  501
  503

- TLS协议
  HTTPS = HTTP + TLS
  1. 对称加密
    双方都要有相同的密钥，双方都知道如何加密和解密
    但这种方法需要让双方都具有相同的密钥，通过网络传输该密钥，一旦被截获，之后的内容加密也无意义

  2. 非对称加密
    服务端生成公钥和私钥，将公钥发布出来，客户端接收到公钥后生成密钥，再用公钥加密该密钥传输给服务端，服务端用独有的私钥解密得到密钥。例子：我把一个空盒子和没上锁的锁寄给你（发布公钥），你写好一份密码本（密钥）放进盒子里再用我给你的锁把它锁住（用公钥加密）寄给我，我再用唯一一把钥匙（私钥）打开锁拿到密码本（密钥），这样我们两边就都有密码本的加密方法了。



# HTTP/3.0
- 2.0的缺陷：
  1. TCP的队头阻塞（不是HTTP的队头阻塞）：指当单个数据包丢失时，TCP会暂停后续的包的传输，先重传丢失的包数据，再进行后续的传输。（HTTP的队头阻塞是是指在TCP连接中当队伍头部的HTTP请求之后没有HTTP相应时，下面所有的HTTP请求就会排队）
  2. TCP慢启动

- TCP协议僵化：TCP常用于物理层，一旦TCP修改，像是路由器、交换机、防火墙等等全部需要更新

所以TCP动不了，还是得继续使用，于是就决定开发一个新的协议——QUIC协议，让新生产的设备支持QUIC，慢慢替换TCP。所以现在是QUIC和TCP共用的时代。
由于HTTP2.0所带来的问题都是TCP的，所以HTTP3.0直接不用TCP。

- QUIC协议：基于UDP，在UDP上实现了类似于TCP的多路数据流，可靠性传输等功能。
  1. 实现了类似于TCP的流量控制和可靠性传输
  2. 集成了TLS加密功能
  3. 实现了HTTP2中的多路复用